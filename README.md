# Симулятор поведения несжимаемых жидкостей в замкнутом пространстве

Задание выполнено в рамках дз2 по курсу "Программирование на C++"

---

## Оглавление
- [Реализованные функции](#реализованные-функции)
- [Структура проекта](#структура-проекта)
- [Структура проекта](#структура-проекта)
- [Опции запуска](#опции-запуска)
- [Сборка и запуск](#сборка-и-запуск)

---

## Реализованные функции

Список основных функций проекта:
- Ввод данных из файла
- Написан шаблонный ```Fixed```
- Написан шаблонный класс симулятор с выбором типов, размеров и возможность использовать динамический размер
- Написано преобразование типов из рантайма в статический набор параметров 
- Сделана возможность сохранить параметры симуляции на каждом шаге в файл; продолжать симуляцию с сохраненного состояния
- Написана программа-очиститель для удаления файлов с параметрами симуляции

---

## Структура проекта

- [main.cpp](main.cpp) — основной файл
- [fluid.h](fluid.h) — симулятор жидкости
- [fluid-creator.h](fluid-creator.h) — "шаблонное нечто", создающее симулятор
- [fixed.h](fixed.h) — шаблонный ```Fixed```
- [saved-data-cleaner.cpp](saved-data-cleaner.cpp) — очиститель файлов с параметрами симуляции
- [vector-field.h](vector-field.h) - класс для работы с векторными полями

---

## Опции запуска

Доступные опции для запуска:

- В параметрах командной строки к собранному проекту можно указать:
  - ```--input-file``` - путь к файлу с входными данными
  - ```--save-file``` - путь к файлу, в который будут сохраняться параметры симуляции
  - ```--p-type``` - тип для давления
  - ```--v-type``` - тип для скорости
  - ```--v-flow-type``` - тип для скорости потока
- Параметры компиляции указываются в [CMakeLists.txt](CMakeLists.txt) в виде ```target_compile_definitions```

---
## Сборка и запуск

### Предварительные требования

- Работающий Cmake
- Компилятор языка C++
- UNIX-система (или подобная) (На Windows происходит ошибка рекурсии, решения найти я не успел) (У себя проект собирал и запускал на MacOS)

### Сборка проекта

1. Создайте папку для сборки (опционально):
   ```bash
   mkdir build
   ```

2. Перейдите в папку сборки (опционально):
   ```bash
   cd build
   ```
3. Соберите проект с помощью cmake:
   ```bash
   cmake ..
   ```
    ```bash
   cmake --build .
   ```
---
### Запуск проекта
Примеры запуска:
   ```bash
   ./fluid-simulator --input-file=../input.txt --save-file=../saved-position.txt --p-type="FIXED(32,7)" --v-type="FIXED(32,7)" --v-flow-type="FIXED(32,7)"
   ```
   ```bash
   ./fluid-simulator --input-file=../input.txt --save-file=../saved-position.txt --p-type="FIXED(32,7)" --v-type="FAST_FIXED(52,13)" --v-flow-type="DOUBLE" 
   ```

Для остановки программы используйте Ctrl+C (Control+C), информация будет сохранена в файл (```saved-position.txt```), для выхода из программы используйте Q, для продолжения используйте C

Пример последовательной работы:
- Запуск жидкости
   ```bash
   ./fluid-simulator --input-file=../input.txt --save-file=../saved-position.txt --p-type="FIXED(32,7)" --v-type="FIXED(32,7)" --v-flow-type="FIXED(32,7)"
   ```
- Ctrl+C (Control+C) для остановки программы, далее Q для выхода. Текущая позиция сохранится в файле
- Запуск с сохраненной позиции
   ```bash
   ./fluid-simulator --input-file=../saved-position.txt --save-file=../saved-position.txt --p-type="FIXED(32,7)" --v-type="FIXED(32,7)" --v-flow-type="FIXED(32,7)"
   ```
- Ctrl+C (Control+C) для остановки программы, далее Q для выхода. Текущая позиция сохранится в файле
- Очистка сохранения 
   ```bash
   ./cleaner
   ```
- Запуск с другими параметрами
   ```bash
   ./fluid-simulator --input-file=../input.txt --save-file=../saved-position.txt --p-type="FIXED(32,7)" --v-type="FAST_FIXED(52,13)" --v-flow-type="DOUBLE" 
   ```
